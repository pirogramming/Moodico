{% extends 'base.html' %}
{% load static %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/users/login.css' %}" />
{% endblock %}

{% block content %}
{% if user.is_authenticated %}
<div class="login-container">
    <div class="login-box" style="text-align: center;">
        <h2 style="margin-bottom: 20px;">환영합니다, {{ user.first_name | default:user.username }}님</h2>
        <a href="{% url 'profile' %}" style="
            padding: 10px 20px;
            background-color: mediumpurple;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            text-decoration: none;
            margin-right: 10px;
        ">프로필</a>
        <form action="{% url 'logout' %}" method="post" style="display: inline;">
            {% csrf_token %}
            <button type="submit" style="
                padding: 10px 20px;
                background-color: #333;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                font-size: 16px;
            ">로그아웃</button>
        </form>
    </div>
</div>
{% else %}

<div class="login-container">
    <div class="login-box">
        <h2>로그인</h2>
        <form action="{% url 'login' %}" method="post">
            {% csrf_token %}

            {% if form.errors %}
                <div class="form-errors" style="color: red; margin-bottom: 10px;">
                    {% for field in form %}
                        {% for error in field.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    {% endfor %}
                    {% for error in form.non_field_errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}

            <div class="login-input-group">
                <label for="username">아이디</label>
                <input type="text" id="username" name="username" placeholder="아이디를 입력하세요" required>
            </div>
            <div class="login-input-group">
                <label for="password">비밀번호</label>
                <input type="password" id="password" name="password" placeholder="비밀번호를 입력하세요" required>
            </div>
            <button type="submit" class="login-button">로그인</button>
        </form>

        <div class="social-login">
            <p>또는</p>
            <a href="{% url 'kakao_authorize' %}" class="kakao-login-button">
                카카오로 로그인
            </a>
        </div>
        <div class="signup-link">
            계정이 없으신가요? <a href="{% url 'signup' %}">회원가입</a>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}