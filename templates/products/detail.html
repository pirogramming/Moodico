{% extends 'base.html' %} {% load static %} {% block extra_head %}
<link rel="stylesheet" href="{% static 'css/products/detail.css' %}" />
<link rel="stylesheet" href="{% static 'css/products/rating.css' %}" />
{% endblock %} {% block content %}
<div class="product-detail-container">
  <div class="product-image-area">
    <img src="{{ product.image }}" alt="{{ product.name }}" />
  </div>
  <div class="product-info-area">
    <p class="brand-name">{{ product.brand }}</p>
    <h1>{{ product.name }}</h1>
    <p class="price">{{ product.price }}</p>

    <!-- 별점 섹션 추가 -->
    <div class="rating-section">
      <div class="rating-summary">
        <div class="average-rating">
          <span class="rating-number" id="average-rating">0.0</span>
          <div class="stars" id="average-stars">
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
          </div>
        </div>
        <span class="rating-count" id="rating-count">(0개 평가)</span>
      </div>

      <div class="user-rating">
        <h3>내 별점</h3>
        <div class="rating-input">
          <div class="stars-input" id="stars-input">
            <span class="star" data-rating="1">☆</span>
            <span class="star" data-rating="2">☆</span>
            <span class="star" data-rating="3">☆</span>
            <span class="star" data-rating="4">☆</span>
            <span class="star" data-rating="5">☆</span>
          </div>
          <textarea
            id="rating-comment"
            placeholder="리뷰를 남겨주세요 (선택사항)"
          ></textarea>
          <button id="submit-rating" class="submit-rating-btn">
            별점 남기기
          </button>
        </div>
      </div>
    </div>

    <p class="description">{{ product.description }}</p>

    <div class="product-details">
      <div class="detail-item">
        <span class="detail-label">색상:</span>
        <div style="display: flex; align-items: center; gap: 10px">
          <div
            class="color-swatch"
            style="background-color: {{ product.color }};"
          ></div>
          <span class="detail-value">{{ product.color }}</span>
        </div>
      </div>
      <div class="detail-item">
        <span class="detail-label">무드:</span>
        <span class="detail-value">{{ product.mood }}</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">웜/쿨:</span>
        <span class="detail-value">{{ product.warmCool }}%</span>
      </div>
      <div class="detail-item">
        <span class="detail-label">라이트/딥:</span>
        <span class="detail-value">{{ product.lightDeep }}%</span>
      </div>
    </div>

    <div class="purchase-links">
      <button
        class="color-matrix-explore"
        onclick="location.href='{% url 'color_matrix_explore' %}'"
      >
        색상 매트릭스 보기
      </button>
      <a href="#" class="buy-now">바로 구매</a>
    </div>
  </div>
</div>

<!-- 별점 목록 섹션 -->
<div class="ratings-list-section">
  <h3>사용자 리뷰</h3>
  <div id="ratings-list" class="ratings-list">
    <!-- 별점 목록이 여기에 동적으로 로드됩니다 -->
  </div>
</div>

<script>
  // 제품 ID 가져오기
  const productId = "{{ product.id }}";
  const productName = "{{ product.name }}";
  const productBrand = "{{ product.brand }}";
</script>
<script src="{% static 'js/products/rating.js' %}"></script>
{% endblock %}
