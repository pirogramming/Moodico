{% extends 'base.html' %} {% load static %} {% block extra_head %}
<link rel="stylesheet" href="{% static 'css/products/product_ranking.css' %}" />
{% endblock %} {% block content %}
<div class="ranking-container">
  <div class="ranking-header">
    <h1>ğŸ† ì œí’ˆ ì¸ê¸° ë­í‚¹</h1>
    <p>ì‚¬ìš©ìë“¤ì´ ê°€ì¥ ë§ì´ ì°œí•œ ì¸ê¸° ì œí’ˆ TOP 10</p>
    {% if top_products %}
    <div class="ranking-stats">ì´ {{ top_products|length }}ê°œì˜ ì¸ê¸° ì œí’ˆ</div>
    {% endif %}
  </div>

  {% if error_message %}
  <div class="empty-state">
    <div class="icon">âš ï¸</div>
    <h2>ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h2>
    <p>{{ error_message }}</p>
    <a href="{% url 'main' %}" class="back-btn">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
  </div>
  {% elif top_products %}
  <div class="ranking-grid">
    {% for product in top_products %}
    <div
      class="ranking-card {% if forloop.counter <= 3 %}top-3 rank-{{ forloop.counter }}{% endif %}"
      data-product-id="{{ product.product_id }}"
    >
      {% if forloop.counter == 1 %}
      <div class="crown-icon">ğŸ‘‘</div>
      {% endif %}

      <div class="ranking-number {% if forloop.counter > 3 %}other{% endif %}">
        {{ forloop.counter }}
      </div>

      <img
        src="{{ product.product_image|default:'/static/images/test.jpg' }}"
        alt="{{ product.product_name }}"
        class="product-image"
        onerror="this.src='/static/images/test.jpg'"
      />

      <div class="product-details">
        <div class="product-brand">{{ product.product_brand }}</div>
        <div class="product-name">{{ product.product_name }}</div>
        <div class="product-price">{{ product.product_price }}</div>
        <div class="like-info">ğŸ’œ {{ product.like_count }}ëª…ì´ ì°œí•¨</div>
      </div>
    </div>
    {% endfor %}
  </div>

  <div style="text-align: center">
    <a href="{% url 'main' %}" class="back-btn">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
  </div>
  {% else %}
  <div class="empty-state">
    <div class="icon">ğŸ“Š</div>
    <h2>ì•„ì§ ë­í‚¹ì´ ì—†ì–´ìš”</h2>
    <p>ì‚¬ìš©ìë“¤ì´ ì œí’ˆì„ ì°œí•˜ë©´ ì¸ê¸° ë­í‚¹ì´ ìƒì„±ë©ë‹ˆë‹¤.</p>
    <p>ì²« ë²ˆì§¸ë¡œ ì œí’ˆì„ ì°œí•´ë³´ì„¸ìš”! ğŸ’–</p>
    <a href="{% url 'main' %}" class="back-btn">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
  </div>
  {% endif %}
</div>
{% endblock %} {% block extra_js %}
<script src="{% static 'js/products/like_button.js' %}"></script>
{% endblock %}
