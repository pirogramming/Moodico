{% extends 'base.html' %}
{% load static %}

{% block extra_head %}
{% extends 'base.html' %}
{% load static %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/products/product_ranking.css' %}" />
{% endblock %}

{% block content %}
{% endblock %}

{% block content %}
<div class="ranking-container">
  <div class="ranking-header">
    <h1>ğŸ† ì œí’ˆ ì¸ê¸° ë­í‚¹</h1>
    <p>ì‚¬ìš©ìë“¤ì´ ê°€ì¥ ë§ì´ ì°œí•œ ì¸ê¸° ì œí’ˆ TOP 10</p>
    {% if top_products %}
      <div class="ranking-stats">ì´ {{ top_products|length }}ê°œì˜ ì¸ê¸° ì œí’ˆ</div>
    {% endif %}
  </div>

  <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
  <div class="category-selector">
    <form method="get">
      <select name="category" onchange="this.form.submit()">
        <option value="" {% if selected_category == '' %}selected{% endif %}>âœ¨ëª¨ë‘ ë³´ê¸°</option>
        <option value="Lips" {% if selected_category|lower == 'lips' %}selected{% endif %}>ğŸ’‹ë¦½</option>
        <option value="eyeshadow" {% if selected_category|lower == 'eyeshadow' %}selected{% endif %}>ğŸ‘€ì•„ì´ì„€ë„ìš°</option>
        <option value="blush" {% if selected_category|lower == 'blush' %}selected{% endif %}>ğŸŒ¸ë¸”ëŸ¬ì…”</option>
      </select>
    </form>
  </div>

  <div id="products-container" class="ranking-grid">
    {% if top_products %}
      {% for product in top_products %}
        <div class="ranking-card {% if forloop.counter <= 3 %}top-3 rank-{{ forloop.counter }}{% endif %}">
          {% if forloop.counter == 1 %}<div class="crown-icon">ğŸ‘‘</div>{% endif %}
          <img src="{{ product.product_image|default:'/static/images/test.jpg' }}" 
               alt="{{ product.product_name }}" 
               onerror="this.src='/static/images/test.jpg'" />
          <div class="ranking-number {% if forloop.counter > 3 %}other{% endif %}">{{ forloop.counter }}</div>
          <div class="product-details">
            <div class="product-brand">{{ product.product_brand }}</div>
            <div class="product-name">{{ product.product_name }}</div>
            <div class="product-price">{{ product.product_price }}</div>
            <div class="like-info">ğŸ’œ {{ product.like_count }}ëª…ì´ ì°œí•¨</div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <div class="empty-state">
        <div class="icon">ğŸ“Š</div>
        <h2>í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì— ì œí’ˆì´ ì—†ì–´ìš”</h2>
        <p>ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ë³´ì„¸ìš”!</p>
      </div>
    {% endif %}
  </div>

  <div style="text-align: center">
    <a href="{% url 'main' %}" class="back-btn">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
  </div>
</div>
{% endblock %}
